---
import { logos } from 'virtual:starlight/user-images'
import config from 'virtual:starlight/user-config'
import type { Props } from '@astrojs/starlight/props'
// import { formatPath } from '@astrojs/starlight/utils/format-path'

// const href = formatPath(Astro.props.locale || '/')
const href = '/'
---

<a {href} class="site-title sl-flex">
	{config.logo && logos.dark && (
		<>
			<img
				class:list={{ 'light:sl-hidden': !('src' in config.logo) }}
				alt={config.logo.alt}
				src={logos.dark.src}
				width={logos.dark.width}
				height={logos.dark.height}
			/>
			{/* Show light alternate if a user configure both light and dark logos. */}
			{!('src' in config.logo) && (
				<img
					class="dark:sl-hidden"
					alt={config.logo.alt}
					src={logos.light?.src}
					width={logos.light?.width}
					height={logos.light?.height}
				/>
			)}
		</>
	)}
	<span class:list={{ 'sr-only': config.logo?.replacesTitle }}>
		{config.title}
	</span>
</a>

<style lang="scss">
	.site-title {
		align-items: center;
		gap: var(--sl-nav-gap);
		font-size: var(--sl-text-h4);
		font-weight: 600;
		color: var(--sl-color-white); // var(--sl-color-text-accent);
		text-decoration: none;
		white-space: nowrap;

		&:hover {
			background-image: linear-gradient(
				to right,
				rgba(255, 0, 0, 1) 0%,
				rgba(255, 154, 0, 1) 10%,
				rgba(208, 222, 33, 1) 20%,
				rgba(79, 220, 74, 1) 30%,
				rgba(63, 218, 216, 1) 40%,
				rgba(47, 201, 226, 1) 50%,
				rgba(28, 127, 238, 1) 60%,
				rgba(95, 21, 242, 1) 70%,
				rgba(186, 12, 248, 1) 80%,
				rgba(251, 7, 217, 1) 90%,
				rgba(255, 0, 0, 1) 100%
			);
			background-size: 200% 100%;
			background-position: 0 0;
			background-clip: text;
			-webkit-background-clip: text;
			color: #00000022;
			animation: site-title-rainbow 2s linear infinite;
			animation-play-state: running;
		}

		&:active {
			color: #00000011;
		}

		img {
			height: calc(var(--sl-nav-height) - 2 * var(--sl-nav-pad-y));
			width: auto;
			max-width: 100%;
			object-fit: contain;
			object-position: 0 50%;
		}
	}

	:global(:root[data-theme='light']) .site-title {
		&:hover {
			color: #00000044;
		}

		&:active {
			color: #00000022;
		}
	}

	@keyframes site-title-rainbow {
		0% {
			background-position-x: 0%;
		}
		100% {
			background-position-x: -200%;
		}
	}
</style>
